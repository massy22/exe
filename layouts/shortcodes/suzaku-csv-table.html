{{/*
  CSVファイルをテーブル表示
*/}}

{{- $path := .Get 0 }}
{{- $res := resources.Get $path }}
{{- $rows := cond (ne $res nil) ($res | transform.Unmarshal (dict "delimiter" ",")) (slice) }}

<table>
  {{- range $i, $record := $rows }}
  {{- if eq $i 0 }}
  <tr>
    {{- range $record }}
    <th>{{- replace . "\n" "<br />" | safeHTML -}}</th>
    {{- end }}
  </tr>
  {{- end }}
  {{- if gt $i 0 }}
  <tr>
    {{- range $record }}
    <td>{{- replace . "\n" "<br />" | safeHTML -}}</td>
    {{- end }}
  </tr>
  {{- end }}
  {{- end }}
</table>